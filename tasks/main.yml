---
# tasks file for sonarqube

- name: "(Install: CentOS/RedHat) Add NGINX Repository"
  yum_repository:
    name: nginx
    baseurl: https://nginx.org/packages/mainline/centos/7/$basearch/
    description: NGINX Repository
    enabled: yes
    gpgcheck: yes

- name: "(Install: CentOS/RedHat) Install Required CentOS/RedHat Dependencies"
  yum:
    name: openssl

- name: "(Install: CentOS/RedHat) Install NGINX"
  yum:
    name: nginx
    state: present
    disablerepo: "*"
    enablerepo: "nginx"

- name: Choose platform based task
  include_tasks: '{{ platform }}'
  with_first_found:
    - 'system/{{ ansible_facts.system }}.yml'
    - 'system/not-supported.yml'
  loop_control:
    loop_var: platform
