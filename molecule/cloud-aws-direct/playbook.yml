---
- name: Converge
  hosts: all
  roles:
    - role: ansible-role-sonarqube
      sonar_install_optional_plugins: true
      sonar_optional_plugins:
        - "https://github.com/QualInsight/qualinsight-plugins-sonarqube-smell/releases/download/\
          qualinsight-plugins-sonarqube-smell-{{ smell_version }}/qualinsight-sonarqube-smell-plugin-{{ smell_version }}.jar"
        - "https://github.com/QualInsight/qualinsight-plugins-sonarqube-badges/releases/download/\
          qualinsight-plugins-sonarqube-badges-{{ badges_version }}/qualinsight-sonarqube-badges-{{ badges_version }}.jar"
        - 'https://binaries.sonarsource.com/Distribution/sonar-auth-bitbucket-plugin/sonar-auth-bitbucket-plugin-{{ auth_bitbucket_version }}.jar'
        - "https://github.com/Soyn/sonar-bitbucket-plugin/releases/download/\
          v{{ bitbucket_version }}/sonar-bitbucket-plugin-{{ bitbucket_version }}.jar"
        - 'https://github.com/AmadeusITGroup/sonar-stash/releases/download/{{ stash_version }}/sonar-stash-plugin-{{ stash_version }}.jar'
        - 'https://github.com/gabrie-allaigre/sonar-gitlab-plugin/releases/download/{{ gitlab_version }}/sonar-gitlab-plugin-{{ gitlab_version }}.jar'
        - 'https://github.com/RIGS-IT/sonar-xanitizer/releases/download/{{ xanitizer_version }}/sonar-xanitizer-plugin-{{ xanitizer_version }}.jar'
        - "https://github.com/mc1arke/sonarqube-community-branch-plugin/releases/download/\
          {{ branch_version }}/sonarqube-community-branch-plugin-{{ branch_version }}.jar"
      sonar_set_jenkins_webhook: true
      sonar_restore_profiles: true
      sonar_web_password: your_new_secure_password
      change_password: true
      sonar_web_old_password: admin
